<script>
$(document).ready( function() {
    if("<%=params[:is_wrong_answer] %>" == 'true')
        alert('정답이 아닙니다');
})
</script>

<br><br><br><br><br><br>
<div class="content">
<div class="row">
    <div class="col-md-1"></div>
    <div class="col-md-10">
        <br><br>
        <%= render 'dialog_modal' %><br><br>

        <% if @wait_for_update %>
            <p><b>완결되지 않은 방탈출입니다. 추후의 업데이트를 기다려주세요!</b></p>
            
        <% else %>
            <% if @stage %>
                <%= render 'form', stage: @stage%>
                <div class='form-group'>
                    
                <% if @stage.mode==1%>       
                    <%=render 'theme_lock'%>
        
                <% elsif @stage.mode==2%>
                    <h4>1: <%=@stage.pattern_num1%></h4>
                    <h4>2: <%=@stage.pattern_num2%> </h4>
                    <h4>3: <%=@stage.pattern_num3%> </h4>
                    <h4>4: <%=@stage.pattern_num4%> </h4>  
                    <h4>5: <%=@stage.pattern_num5%> </h4>
                    <hr>
                    <%= render 'theme_pattern'%>
                    
                <% elsif @stage.mode==3%>
                     <h4>1: <%=@stage.selection_num1%></h4>
                     <h4>2: <%=@stage.selection_num2%> </h4>
                     <h4>3: <%=@stage.selection_num3%> </h4>
                     <h4>4: <%=@stage.selection_num4%> </h4>  
                     <h4>5: <%=@stage.selection_num5%> </h4>
                     <hr>
                     <%= render 'theme_selection'%>
               
                <% end %>
                
                <% if @stage_level == @roomCal.last_stage_level %>
                    <%=form_tag stage_check_path(@room.id), {method: 'post', id:'nextStage'} do %>
                    <label for='stage_answer'>정답 입력창 :: </label>
                    <%=text_field_tag :stage_answer,  "", autocomplete: 'off' , readonly: ((@stage.mode==0) ? false : true)  %>
                    <%=hidden_field_tag :stage_level, @stage_level%>
                    <%=hidden_field_tag :stage_id, @stage.id%>
                    <%=submit_tag '제출', id: 'btn_check_answer', class: 'btn btn-blueblack'%>
                    <% end %>
                <% end %>
            <% end %>
        <%end%>    
                
    </div>
        <% if  @stage_level > 0 %>
          <form method='POST' action="<%=stage_show_path(@room.id) %>" class='btn-form'>
            <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
            <input type='hidden' value='<%= @stage_level-1 %>' name='stage_level'/>
            <input type='submit' value='이전' class='btn btn-default'/>
          </form>
        <% end %>
    
        <!-- 배포된 페이지 까지만 보여주기-->
        <% if (@stages.length)+1 > @stage_level && @stage_level<@roomCal.last_stage_level %>
         <form method='POST' action="<%=stage_show_path(@room.id) %>" class='btn-form'>
            <%= hidden_field_tag :authenticity_token, form_authenticity_token %>
            <input type='hidden' value='<%= @stage_level +1 %>' name='stage_level'/>
            <input type='submit' value='다음' class='btn btn-default'/>
          </form>
        <% end %>
        
        <br><br><hr>
    </div>
    <div class="col-md-1">
       <%= render './time_lines/timeline' %>
    </div>
</div>
</div>
<br><br><br><br><br><br>

 